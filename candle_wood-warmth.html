<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>暮暮光香氛蠟燭</title>
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="all.css">
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;500;700&display=swap" rel="stylesheet">
    <style>

        .product-main-img{
            display: none;
            
            aspect-ratio:1/1;
            vertical-align:bottom;
        }

        .product-main-img img{
            width: 100%;
        }


        .product-page {
            display: flex;
            align-items: flex-start;
            justify-content: space-evenly;
            flex-direction: row-reverse;
            max-width: var(--total-width);
            width:100%;
            margin: 50px auto;
            gap: 50px;
        }
        
        .product-images{
            max-width: 600px;
            overflow: hidden;
        }

        .product-images img {
            width: 100%;
        }

        .product-info {
            display: flex;
            flex-direction: column;
            gap: 25px;
            position: sticky;
            top: 100px;      
        }

        .current-price {
            font-size: 30px;
            font-weight: bold;
            color: #F08B72;
        }

        .original-price {
            text-decoration: line-through;
            color: #888;
            margin-left: 5px;
        }
        .line {
            width: 100%;
            height: 1px;
            background-color: #ccc;
        }

        .scent-btn {
            padding: 8px 16px;
            border: 1px solid #ccc;
            background-color: white;
            cursor: pointer;
            margin-right: 5px;
            transition: all 0.2s ease;
        }

        .scent-btn.active {
            background-color: #FFB661;
            color: white;
            border-color: #FFB661;
        }

        .quantity-wrapper {
            display: flex;
            justify-content: center;
            align-items: center;
            border: 1px solid #999;
            width: fit-content;
            padding: 4px 8px;
            gap: 15px;
        }

        .qty-btn,
        #qty-num {
        text-align: center;
        font-size: 18px;
        border: none;
        background: none;
        }

        .button-group {
            display: flex;
            gap: 15px;
        }

        .btn {
            width: 150px;
            padding: 12px 24px;
            border: 1px solid #85A96E;
            cursor: pointer;
            font-weight: bold;
            transition: 0.3s;
        }

        .outline {
            background-color: white;
            color: #85A96E;
        }

        .filled {
            background-color: #85A96E;
            color: white;
        }
        .btn:hover {
            background-color: #E39D4A;
            border: 2px solid #E39D4A;
            color: #fff;
        }

        .description p {
            font-size: 16px;
        }

        h2{
            color: #85A96E;
            margin-bottom: 50px;
        }


        .section-watching-you{
            max-width: var(--total-width);
            width: 100%;
            margin:50px auto; 
        }

        .product-list{
            display: grid;
            grid-template-columns: repeat(3,250px);
            justify-content: end;
            gap: 50px;
        }

        @media screen and (max-width: 430px) {

        }


        @media screen and (max-width: 768px) {
            .product-main-img{
                display: block;
            }

            .product-page {
                display: flex;
                flex-direction: column;
                max-width: var(--total-width);
                width:100%;
                padding: 0 20px;
                gap: 25px;
            }

            .product-info {
                width: 100%;
                display: flex;
                flex-direction: column;
                gap: 10px;
            }

            .section-watching-you{
            margin: 25px auto; 
            padding: 0 10px;
            text-align: center;
            }

            .product-list{
                grid-template-columns: repeat(3,1fr);
                gap: 10px;
            }



        }

    </style>
</head>
<body>
    <div id="header"></div>

    <nav class="breadcrumb">
        <a href="index.html"><img src="./pic/home.png" alt="首頁" class="breadcrumb-icon">首頁</a>
        <span class="separator">›</span>
        <span>全部商品</span>
        <span class="separator">›</span>
        <span>最新商品</span>
        <span class="separator">›</span>
        <span>暮暮光香氛蠟燭</span>
    </nav>


    <div class="product-page">
        <div class="product-main-img">
            <img src="./items/03_candle_wood-warmth.jpg" alt="商品圖片1">
        </div>

        <div class="product-info-wrapper">
            <div class="product-info">
                <h3>暮暮光香氛蠟燭</h3>
                <p class="price">
                <span class="current-price">NT$990</span>
                <span class="original-price">NT$1090</span>
                </p>
                <div class="line"></div>

                <div class="scent-options">
                    <button class="scent-btn">草本調</button>
                    <button class="scent-btn">花香調</button>
                    <button class="scent-btn">甜香調</button>
                </div>

                <div class="quantity-wrapper">
                    <button class="qty-btn" id="minus">−</button>
                    <span id="qty-num">1</span>
                    <button class="qty-btn" id="plus">＋</button>
                </div>


                <div class="button-group">
                    <button class="btn outline">加入購物車</button>
                    <button class="btn filled">立即結帳</button>
                </div>

                <div class="line"></div>

                <h4>商品描述</h4>
                <div class="description">
                    <p>
                        當火柴劃破靜謐的空氣， 幕幕光悄悄亮起——<br>
                        琥珀玻璃盛裝著淡雅香氣，隨著燭火晃動，<br>
                        像極了黃昏落在你窗邊的那道光。<br>
                        放鬆、沉澱、或只是單純地，陪自己好好靜一會。<br>
                        讓幕幕光，成為你生活中最溫柔的片刻。
                    </p>
                </div>
                <div class="tag">
                    <p>
                        #幕幕光
                        #香氛療癒
                        #日日廢廢選物
                    </p>
                </div>
            </div>
        </div>
        <div class="product-images">
            <img src="./items/03_candle_wood-warmth.jpg" alt="商品圖片1">
            <img src="./items/03_candle_wood-warmth-1.jpg" alt="商品圖片2">
            <img src="./items/03_candle_wood-warmth-2.jpg" alt="商品圖片3">
        </div>
    </div>

    <section class="section-watching-you">
        <h2 class="section-title">不是強迫推銷，<br>只是他們一直看著你。</h2>
        <div class="product-list">
            <div class="product-card">
                <div class="img-wrap">
                <img src="./items/01_lamp_moonlight-bubble.jpg" alt="月夜圓光">
                </div>
                <div class="product-name">月夜圓光</div>
                <div class="product-price">NT$1080</div>
            </div>
            <div class="product-card">
                <div class="img-wrap">
                <img src="./items/02_figure_lucky-meow.jpg" alt="小福餘醬">
                </div>
                <div class="product-name">小福餘醬</div>
                <div class="product-price">NT$390</div>
            </div>
            <div class="product-card">
                <div class="img-wrap">
                <img src="./items/05_ring_forest-heart.jpg" alt="漫漫小龜">
                </div>
                <div class="product-name">漫漫小龜</div>
                <div class="product-price">NT$680</div>
            </div>
        </div>
    </section>

    <div id="footer"></div>
    
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="./js/dayday.js"></script>
<script>

    //選香味
    const buttons = document.querySelectorAll('.scent-btn');
    buttons.forEach(button => {
        button.addEventListener('click', () => {
        // 先移除所有按鈕的 active
        buttons.forEach(btn => btn.classList.remove('active'));
        // 給被點到的那顆加 active
        button.classList.add('active');
        });
    });

    //數量控制
    const minusBtn = document.getElementById('minus');
    const plusBtn = document.getElementById('plus');
    const qtyNum = document.getElementById('qty-num');

    let count = 1;

    minusBtn.addEventListener('click', () => {
        if (count > 1) {
        count--;
        qtyNum.textContent = count;
        }
    });

    plusBtn.addEventListener('click', () => {
        count++;
        qtyNum.textContent = count;
    });

    function syncStickyHeight() {
        if (window.innerWidth <= 768) {
            return; // 不做事
        }
        const imageBox = document.querySelector('.product-images');
        const stickyBox = document.querySelector('.product-info-wrapper');

        if (imageBox && stickyBox) {
        const updateHeight = () => {
            stickyBox.style.height = imageBox.offsetHeight + 'px';
        };

        updateHeight(); // 初始呼叫

        // 如果圖片還沒載完再監聽
        const images = imageBox.querySelectorAll('img');
        let loadedCount = 0;

        images.forEach((img) => {
            if (img.complete) {
            loadedCount++;
            } else {
            img.onload = () => {
                loadedCount++;
                if (loadedCount === images.length) updateHeight();
            };
            }
        });

        // 縮放時也重新對齊
        window.addEventListener('resize', updateHeight);
        }
    }

    window.addEventListener('load', syncStickyHeight);

</script>
</body>
</html>